<mxfile host="65bd71144e">
    <diagram id="FoRhpsQ7FGuQFJp462Gt" name="Page-1">
        <mxGraphModel dx="1024" dy="455" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="55" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=-0.002;entryY=0.507;entryDx=0;entryDy=0;entryPerimeter=0;shadow=1;fontSize=13;" edge="1" parent="1" source="2" target="7">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="2" value="&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;{&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;email,&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;password,&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;username,&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;}&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;" vertex="1" parent="1">
                    <mxGeometry x="38" y="275" width="120" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="58" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;" edge="1" parent="1" source="3" target="8">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="64" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;dashed=1;" edge="1" parent="1" source="3" target="21">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="3" value="CHECK&lt;br&gt;&amp;nbsp;EMAIL&lt;br&gt;USERNAME&lt;br&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="368" y="275" width="110" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="6" value="registration new user" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;" vertex="1" parent="1">
                    <mxGeometry x="308" y="150" width="200" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="57" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;" edge="1" parent="1" source="7">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="423" y="270" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="7" value="&lt;font style=&quot;font-size: 13px;&quot;&gt;POST&amp;nbsp; /user&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=17;rotation=0;" vertex="1" parent="1">
                    <mxGeometry x="238" y="230" width="90" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="59" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;" edge="1" parent="1" source="8" target="41">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="8" value="HASH PASSWORD" style="rounded=1;whiteSpace=wrap;html=1;fontSize=13;" vertex="1" parent="1">
                    <mxGeometry x="538" y="275" width="110" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="54" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;dashed=1;" edge="1" parent="1" source="21" target="2">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="21" value="res.status(400)" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;" vertex="1" parent="1">
                    <mxGeometry x="218" y="345" width="110" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="47" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;" edge="1" parent="1" source="41" target="46">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="41" value="save MongoDB" style="rounded=1;whiteSpace=wrap;html=1;fontSize=13;fillColor=#60a917;fontColor=#ffffff;strokeColor=#2D7600;" vertex="1" parent="1">
                    <mxGeometry x="698" y="275" width="110" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="60" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;" edge="1" parent="1" source="46" target="49">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="46" value="saved user {...args}" style="whiteSpace=wrap;html=1;fontSize=13;rounded=1;fillStyle=auto;" vertex="1" parent="1">
                    <mxGeometry x="693" y="380" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="62" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;" edge="1" parent="1" source="49">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="108" y="380" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="49" value="res.status(200).json(savedUser)" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;" vertex="1" parent="1">
                    <mxGeometry x="383" y="395" width="210" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="50" value="server" style="rounded=1;whiteSpace=wrap;html=1;fillStyle=auto;fontSize=13;" vertex="1" parent="1">
                    <mxGeometry x="50" y="60" width="50" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="51" value="client" style="rounded=1;whiteSpace=wrap;html=1;fillStyle=auto;fontSize=13;fillColor=#1ba1e2;strokeColor=#006EAF;fontColor=#ffffff;" vertex="1" parent="1">
                    <mxGeometry x="110" y="60" width="50" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="52" value="db" style="rounded=1;whiteSpace=wrap;html=1;fillStyle=auto;fontSize=13;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;" vertex="1" parent="1">
                    <mxGeometry x="170" y="60" width="50" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="66" value="authentication" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;" vertex="1" parent="1">
                    <mxGeometry x="340" y="550" width="140" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="80" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=-0.007;entryY=0.34;entryDx=0;entryDy=0;entryPerimeter=0;shadow=1;fontSize=13;" edge="1" parent="1" source="67" target="71">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="67" value="&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;{&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;email,&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;password,&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;" vertex="1" parent="1">
                    <mxGeometry x="40" y="680" width="120" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="85" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;shadow=1;fontSize=13;dashed=1;" edge="1" parent="1" source="68" target="84">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="88" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;" edge="1" parent="1" source="68" target="87">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="68" value="CHECK&amp;nbsp;&lt;br&gt;EXIST&lt;br&gt;USER" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="410" y="680" width="100" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="82" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;" edge="1" parent="1" source="71" target="68">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="483" y="670" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="71" value="POST /auth/login" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;" vertex="1" parent="1">
                    <mxGeometry x="258" y="620" width="120" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="86" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;dashed=1;" edge="1" parent="1" source="84" target="67">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="84" value="res.status(404)" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;" vertex="1" parent="1">
                    <mxGeometry x="258" y="695" width="110" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="93" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.991;entryY=0.613;entryDx=0;entryDy=0;entryPerimeter=0;shadow=1;fontSize=13;dashed=1;" edge="1" parent="1" source="87" target="91">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="96" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;" edge="1" parent="1" source="87" target="95">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="87" value="CHECK&amp;nbsp;&lt;br&gt;PASSWORD" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="540" y="680" width="100" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="94" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;dashed=1;fontSize=13;" edge="1" parent="1" source="91" target="67">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="91" value="res.status(400)" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;" vertex="1" parent="1">
                    <mxGeometry x="258" y="740" width="110" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="100" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;shadow=1;fontSize=19;" edge="1" parent="1" source="95" target="98">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="810" y="710"/>
                            <mxPoint x="810" y="820"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="95" value="create Token&lt;br&gt;add Token to user&lt;br&gt;update user in Mongo" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="670" y="680" width="100" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="102" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=19;" edge="1" parent="1" source="98" target="101">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="98" value="save updated user&amp;nbsp;&lt;br&gt;MongoDB" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#60a917;fontColor=#ffffff;strokeColor=#2D7600;" vertex="1" parent="1">
                    <mxGeometry x="630" y="790" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="106" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;" edge="1" parent="1" source="101" target="105">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="101" value="send cookie &lt;br&gt;name -Token&lt;br&gt;send saved user" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
                    <mxGeometry x="460" y="790" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="107" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;shadow=1;fontSize=13;" edge="1" parent="1" source="105" target="67">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="105" value="res.cookie(name-Token)&lt;br&gt;res.status(200).json(savedUser)" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;dashed=1;fillStyle=auto;" vertex="1" parent="1">
                    <mxGeometry x="210" y="800" width="210" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="108" value="isAuthenticated&amp;nbsp;&lt;br&gt;(middleWare)" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;" vertex="1" parent="1">
                    <mxGeometry x="420" y="1140" width="160" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="114" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;" edge="1" parent="1" source="109" target="113">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="109" value="&lt;br&gt;const token = req.cookie(['name']);&lt;br&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillStyle=auto;fontSize=13;verticalAlign=middle;horizontal=1;" vertex="1" parent="1">
                    <mxGeometry x="230" y="1240" width="230" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="111" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="110" target="109">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="110" value="request" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;" vertex="1" parent="1">
                    <mxGeometry x="90" y="1245" width="70" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="116" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;" edge="1" parent="1" source="113" target="115">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="122" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;shadow=1;fontSize=13;dashed=1;" edge="1" parent="1" source="113">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="105" y="1343" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="113" value="&lt;div style=&quot;text-align: justify;&quot;&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillStyle=auto;fontSize=13;verticalAlign=middle;horizontal=1;arcSize=10;" vertex="1" parent="1">
                    <mxGeometry x="232" y="1305" width="226" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="123" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;shadow=1;dashed=1;fontSize=13;" edge="1" parent="1" source="115">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="105" y="1418" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="125" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;" edge="1" parent="1" source="115" target="124">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="115" value="&lt;div style=&quot;text-align: justify;&quot;&gt;find user by Token&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillStyle=auto;fontSize=13;verticalAlign=middle;horizontal=1;arcSize=10;" vertex="1" parent="1">
                    <mxGeometry x="232" y="1380" width="226" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="118" value="check&lt;br&gt;Token exist" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;" vertex="1" parent="1">
                    <mxGeometry x="295" y="1310" width="90" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="119" value="res.statusCode(403)" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;" vertex="1" parent="1">
                    <mxGeometry x="90" y="1380" width="140" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="121" value="res.statusCode(403)" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;" vertex="1" parent="1">
                    <mxGeometry x="90" y="1305" width="140" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="127" value="" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;shadow=1;fontSize=13;" edge="1" parent="1" source="124" target="126">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="124" value="&lt;div style=&quot;&quot;&gt;add user to request&lt;/div&gt;&lt;div style=&quot;&quot;&gt;merge( req, { identy: user });&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillStyle=auto;fontSize=13;verticalAlign=middle;horizontal=1;arcSize=10;align=center;" vertex="1" parent="1">
                    <mxGeometry x="232" y="1460" width="226" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="128" style="edgeStyle=orthogonalEdgeStyle;sketch=0;jumpStyle=line;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;shadow=1;fontSize=13;" edge="1" parent="1" source="126" target="129">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="540" y="1565" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="126" value="&lt;div style=&quot;&quot;&gt;return next()&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillStyle=auto;fontSize=13;verticalAlign=middle;horizontal=1;arcSize=10;align=center;" vertex="1" parent="1">
                    <mxGeometry x="232" y="1540" width="226" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="129" value="request with user obj" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;" vertex="1" parent="1">
                    <mxGeometry x="553" y="1550" width="140" height="30" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>